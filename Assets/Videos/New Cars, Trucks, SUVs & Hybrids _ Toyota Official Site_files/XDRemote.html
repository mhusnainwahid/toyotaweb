<!DOCTYPE html>
<!-- saved from url=(0046)https://www.toyota.com/analytics/XDRemote.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>XDRemote</title> <script>var XDRemote=function(){function a(b){this.STATUS_FAIL="fail";this.STATUS_SUCCESS="success";this.commandMap={};this.callbackMap={};this.attachListeners()}a.prototype.registerCommandHandler=function(b,e){this.commandMap[b]=e};a.prototype.attachListeners=function(){var b=this.createContextCallback(this,this.receiveMessage);window.addEventListener("message",b,!1)};a.prototype.createContextCallback=function(b,e,a){b.isArray(a)||(a=[]);return function(){var d=Array.prototype.slice.call(arguments),d=d.concat(a);e.apply(b,d)}};a.prototype.receiveMessage=function(b){var a=b.data,d=b.origin;b=b.source;try{var f=this.parseJSON(a)}catch(g){return}a=this.commandMap[f.action];"function"==typeof a&&(f.performance.responseStart=this.now(),this.callbackMap[f.callbackID]={source:b,origin:d,message:f},a(f.action,f.arguments,this.createHandlerCallback(f.callbackID)))};a.prototype.createHandlerCallback=function(b){return function(a){return{context:a,callbackID:b,success:function(d){d=d||{};a.receiveActionResults(b,!0,d)},fail:function(d){d=d||{};a.receiveActionResults(b,!1,d)}}}(this)};a.prototype.receiveActionResults=function(b,a,d){var e;if(e=this.callbackMap[b]){delete this.callbackMap[b];var g=e.origin;b=e.source;instXDCommandMessage=e.message;instXDCommandMessage.status=a?"success":"fail";instXDCommandMessage.performance.responseEnd=this.now();instXDCommandMessage.data=d;a=this.stringify(instXDCommandMessage);b.postMessage(a,g)}};a.prototype.parseJSON=function(a){try{var b=JSON.parse(a)}catch(d){b=d}return b};a.prototype.stringify=function(a){try{var b=JSON.stringify(a)}catch(d){b=""}return b};a.prototype.now=function(){return(new Date).getTime()};a.prototype.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};return new a}();XDRemote.registerCommandHandler("connect",function(a,b,e){a=Visit.getVisitorID();b=Visit.getSession();e.success({visitorID:a,visit:b})});XDRemote.registerCommandHandler("getID",function(a,b,e){a=Visit.getVisitorID();e.success(a)});XDRemote.registerCommandHandler("refreshVisit",function(a,b,e){a=Visit.getVisitorID();b=Visit.getSession();e.success({visitorID:a,visit:b})});XDRemote.registerCommandHandler("peekVisit",function(a,b,e){a=Visit.getVisitorID();b=Visit.monitorSession();e.success({visitorID:a,visit:b})});XDRemote.registerCommandHandler("appendToVisit",function(a,b,e){var d=Visit.getVisitorID(),f=Visit.monitorSession();a=b[0];var g=b[1];b=b[2]||",";f={visitorID:d,visit:f};d=(d=Visit.getSessionData(a)||"")?d.split(b):[];g&&d.push(g);f[a]=d.join(b);Visit.setSessionData(a,f[a]);e.success(f)});var Visit=function(a){function b(c){c=c||(new Date).getTime();return h&&k&&q&&r&&c<=k}function e(){b()||(A(),f());l=parseInt(B("tabNumber"),10)||0;m&&l||(l=++m,C("tabNumber",l));k=(new Date).getTime()+D;g();return d()}function d(){return{id:r,start:h,modified:q,expires:k,tabs:m,tabNumber:l}}function f(){h=(new Date).getTime();k=h+D;q=h;r=E();m=0}function g(){F(d())}function A(){if(n())for(var c in localStorage)"_v_ses_"===c.substr(0,7)&&delete localStorage[c];if(w())for(c in sessionStorage)"_v_ses_"===c.substr(0,7)&&delete sessionStorage[c]}function G(c){if("[object Array]"===Object.prototype.toString.call(c)){var a={};for(var b=0,d=c.length;b<d;b++)a[c[b]]=t(c[b],"_v_ses_")}else a=t(c,"_v_ses_");return a}function F(c,a){if("object"===typeof c)for(var b in c)u(b,c[b],"_v_ses_");else u(c,a,"_v_ses_")}function p(c,a){var b=a||"_v_ses_";return c.substr(0,b.length)!==b?b+c:c}function w(){try{if(window.sessionStorage&&window.sessionStorage.getItem)return!0}catch(c){}return!1}function B(c,a){var b="";w()&&(b=sessionStorage.getItem(p(c,a)));return b}function C(c,a,b){w()&&sessionStorage.setItem(p(c,b),a)}function n(){try{if(window.localStorage&&window.localStorage.getItem)return!0}catch(c){}return!1}function t(c,a){var b="";n()&&(b=localStorage.getItem(p(c,a)));return b}function u(c,a,b){n()&&localStorage.setItem(p(c,b),a)}function v(c,a){a=a||16;return(c||"xxxxxxxxxxxxxxxx^xxxxxxxxxxxxxxxx").replace(/[x]/g,function(c){return(Math.random()*a|0).toString(a)})}function H(a){u("id",a,"_v_vis_")}function E(){var a=v("_xxxxxxx",36),b=x(13885344E5);return y(b,36)+a}function x(a,b){a=a||0;b=b||(new Date).getTime();return b-a}function y(a,b){b=z(b);a=parseInt(a,10);return a.toString(b)}function z(a){a=Math.max(a||10,2);return Math.min(a,36)}var h,k,q,r,m,l,D=a|0||18E5;(function(){var a=G(["id","start","expires","modified","tabs"]);h=parseInt(a.start,10)||0;k=parseInt(a.expires,10)||0;q=parseInt(a.modified,10)||0;r=a.id;m=parseInt(a.tabs,10)||0})();e();return{isSessionValid:b,getVisitorID:function(){var a=t("id","_v_vis_");a||(n()?(a=v("xxxxxxxxxxxxxxxx_xxxxxxxxxxxxxxxx",10),H(a)):a="");return a},updateVisitorID:H,getSession:e,monitorSession:function(){return d()},saveSession:g,createSession:f,getSessionData:G,setSessionData:F,clearSessionData:A,getVisitSegment:E,guidGenerator:v,getTransactionSegment:function(a){a=x(h);var b=v("_xx",36);return y(a,36)+b},getDuration:x,encodeInteger:y,decodeInteger:function(a,b){b=z(b);return parseInt(a,b)},validateBase:z,writeData:u,readData:t,readSessionStorage:B,writeSessionStorage:C,clearData:function(a,b){n()&&delete localStorage[p(a,b)]}}}(18E5); </script></head><body></body></html>