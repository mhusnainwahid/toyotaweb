!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function i(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}window.TCOM_COMPONENT_LIST_CACHE||(window.TCOM_COMPONENT_LIST_CACHE=[]),window.TCOM_MUTATION_LIST_CACHE||(window.TCOM_MUTATION_LIST_CACHE=[]),window.TCOM_MUTATION_TOINIT||(window.TCOM_MUTATION_TOINIT=[]),window.TCOM_ENTRYPOINT_MUTATION_OBSERVER||(window.TCOM_ENTRYPOINT_MUTATION_OBSERVER=null),window.TCOM_ENTRYPOINT_MUTATION_OBSERVER_PROCESS||(window.TCOM_ENTRYPOINT_MUTATION_OBSERVER_PROCESS=null),window.TCOM_BIND_TIMEOUT||(window.TCOM_BIND_TO=null);var s=340;function u(e,n){t(document.querySelectorAll(n)).forEach((function(t){var r=t.dataset||{},o=r.autobind,a=r.bound;if("false"!==o&&"true"!==a&&!t.closest('[data-prevent_entrypoint_init="true"]'))try{var c=function(e){var t=e.dataset;return Object.keys(t).filter((function(e){return e.split("cfg").length>1})).reduce((function(e,n){try{return e[n.split("cfg")[1].replace(/^([A-Z])/g,(function(e,t){return t.toLowerCase()}))]=t[n],e}catch(e){return null}}),{})}(t);new e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({el:t},c)),t.setAttribute("data-bound","true"),console.log("EntryPoint.initComponents: component bound",e.name||"",n)}catch(t){console.error("EntryPoint.initComponents: error binding component",e.name||"",n,t)}}))}function d(){window.TCOM_BIND_TIMEOUT=!1,window.TCOM_COMPONENT_LIST_CACHE.forEach((function(e){var t=e.constructor,n=e.selector;window.TCOM_MUTATION_TOINIT.indexOf(n)>-1&&u(t,n)})),window.TCOM_MUTATION_TOINIT.length=0}function f(e){window.TCOM_MUTATION_TOINIT.push(e),window.TCOM_BIND_TIMEOUT&&clearTimeout(window.TCOM_BIND_TIMEOUT),window.TCOM_BIND_TIMEOUT=setTimeout(d,s)}function T(){var e,t=a(window.TCOM_MUTATION_LIST_CACHE);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;if(null!=r&&null!==(n=r.addedNodes)&&void 0!==n&&n.length){var i,o=a(r.addedNodes);try{for(o.s();!(i=o.n()).done;){var c,l=i.value;if(null!==(c=window.TCOM_COMPONENT_LIST_CACHE)&&void 0!==c&&c.length){var s,u=a(window.TCOM_COMPONENT_LIST_CACHE);try{for(u.s();!(s=u.n()).done;){var d=s.value.selector;if(!(window.TCOM_MUTATION_TOINIT.indexOf(d)>-1)){var T="function"==typeof l.querySelectorAll?l.querySelectorAll(d):null,O="function"==typeof l.matches&&l.matches(d);((null==T?void 0:T.length)||r.target.matches(d)||O)&&f(d)}}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){t.e(e)}finally{t.f()}window.TCOM_MUTATION_LIST_CACHE.length=0}function O(){window.TCOM_ENTRYPOINT_MUTATION_OBSERVER||(window.TCOM_ENTRYPOINT_MUTATION_OBSERVER=new MutationObserver((function(e){null!=e&&e.length&&(window.TCOM_MUTATION_LIST_CACHE=[].concat(t(window.window.TCOM_MUTATION_LIST_CACHE),t(e)),window.TCOM_ENTRYPOINT_MUTATION_OBSERVER_PROCESS&&window.cancelAnimationFrame(window.TCOM_ENTRYPOINT_MUTATION_OBSERVER_PROCESS),window.TCOM_ENTRYPOINT_MUTATION_OBSERVER_PROCESS=window.requestAnimationFrame(T))})),window.TCOM_ENTRYPOINT_MUTATION_OBSERVER.observe(document.documentElement,{subtree:!0,childList:!0}))}var h=function(e,t){e&&t&&(!function(e,t){window.TCOM_COMPONENT_LIST_CACHE.some((function(e){return e.selector===t}))||window.TCOM_COMPONENT_LIST_CACHE.push({constructor:e,selector:t})}(e,t),u(e,t),document.querySelector(".xf-modal .modal-content")&&u(e,".xf-modal ".concat(t)),document.addEventListener("DOMContentLoaded",O))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var y=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.currentSlide=0,this.closestTabbedContainer=this.config.el.closest(".tabbed-container-wrapper"),this.carouselContainer=this.config.el.querySelector(".cmp-carousel"),this.carouselButtons=this.config.el.querySelectorAll(".cmp-carousel__actions button"),this.carousel=this.carouselContainer?this.carouselContainer.querySelector(".js_slider"):null,this.carouselDots=this.carouselContainer?this.carouselContainer.querySelectorAll(".navigation-dots"):null,this.infinite=this.carouselContainer?"true"==this.carouselContainer.dataset.cmpInfinite||!1:null,this.slides=this.carousel?this.carousel.querySelectorAll(".cmp-carousel__item"):null;var r=window.matchMedia("screen and (max-width: 1023px)");if(r.addEventListener("change",(function(e){n.setHeight(e.matches)})),this.infinite&&(this.currentSlide=1),this.handleEvent=this.handleEvent.bind(this),this.closestTabbedContainer){if(this.closestTabbedContainer.classList.add("vehicle-selector-tabs"),!this.closestTabbedContainer.querySelector(".tabbed-container__title"))return;var o=this.closestTabbedContainer.querySelector(".tab-content__tab--active .vehicle-selector-container"),a=this.config.el.querySelector(".vehicle-selector-container"),c=function(e){return new CustomEvent("tabbedcontainer.title.update",{detail:{title:e}})};if(o===a){var l=o.dataset.title;l&&this.closestTabbedContainer.dispatchEvent(c(l))}this.closestTabbedContainer.addEventListener("tabbedcontainer.tab.changed",(function(e){var t=e.detail.data.nextTab.tabContent.querySelector(".vehicle-selector-container");if(t===a){var i=t.dataset.title;i?n.closestTabbedContainer.dispatchEvent(c(i)):n.closestTabbedContainer.dispatchEvent(new CustomEvent("tabbedcontainer.title.reset",{}));var o=n.config.el.querySelector(".carousel-container"),l=new CustomEvent("resetCarousel",{detail:{carouselEl:o}});window.setTimeout((function(){return window.dispatchEvent(l)}),500)}clearTimeout(n.setHeightTimeout),n.setHeightTimeout=setTimeout((function(){n.setHeight(r.matches)}),100),n.lazyLoadPartials()}))}window.addEventListener("scroll",(function(e){clearTimeout(n.eventTimeout),n.eventTimeout=setTimeout((function(){n.handleEvent(e)}),300)})),this.carousel&&(this.carousel.addEventListener("before.slide",(function(e){clearTimeout(n.beforeSlideTimeout),n.beforeSlideTimeout=setTimeout((function(){n.handleEvent(e)}),100)})),this.carousel.addEventListener("after.slide",(function(e){clearTimeout(n.afterSlideTimeout),n.afterSlideTimeout=setTimeout((function(){n.handleEvent(e)}),100)})),this.setHeight(r.matches),clearTimeout(this.slideObserverTimeout),this.slideObserverTimeout=setTimeout((function(){n.slideObserver()}),1e3))}var n,r,a;return n=e,(r=[{key:"setHeight",value:function(e){if(this.carousel){var t=this.closestTabbedContainer.querySelectorAll(".tab-content__tab.active .carousel-container .js_slide"),n=t.length>0?t:this.slides,r=Array.from(n),i=0,o=0;for(i=0;i<r.length;i++){var a=r[i].querySelector(".slide-panel.bottom");if(a.style.height="",e){if(a.offsetHeight>o){o=a.offsetHeight,i=-1;continue}a.style.height="".concat(o,"px")}}}}},{key:"handleEvent",value:function(e){e.target;var t=e.type,n=e.detail;switch(t){case"before.slide":break;case"after.slide":var r=n.currentSlide;this.currentSlide=r,this.handleLastSlide();break;case"scroll":this.lazyLoadPartials();break;default:console.log(e)}}},{key:"handleLastSlide",value:function(){if(!(this.slides.length>2||this.config.el.querySelector(".carousel-container").classList.contains("inline"))){var e=this.infinite?this.slides.length-2:this.slides.length-1;if(this.currentSlide==e){var t=this.carouselButtons[0].offsetLeft,n=this.carousel.querySelector(".frame").offsetWidth-(this.slides[this.currentSlide].offsetLeft+this.slides[this.currentSlide].offsetWidth)-this.carouselContainer.getBoundingClientRect().left-t;this.carousel.querySelector(".slides").style.transform="translate(".concat(n,"px)")}}}},{key:"lazyLoadPartials",value:function(){var e=this.carousel.getBoundingClientRect();0!=e.height&&e.y<(window.innerHeight||document.clientHeight)&&t(this.carousel.querySelectorAll(".slide-image img:not(.is-loaded)")).map((function(e){e.classList.add("is-loaded")}))}},{key:"slideObserver",value:function(){var e=this;Array.from(this.slides).forEach((function(t){new IntersectionObserver((function(n){n[0].isIntersecting?(t.ariaHidden=!1,t.tabIndex=0,e.tabOrder(t,0)):(t.ariaHidden=!0,t.tabIndex=-1,e.tabOrder(t,-1))})).observe(t)}))}},{key:"tabOrder",value:function(e,t){var n=0===t?"-1":"0",r=e.querySelectorAll('[tabindex="'.concat(n,'"]'));Array.from(r).forEach((function(e){e.tabIndex=t}))}}])&&o(n.prototype,r),a&&o(n,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();new h(y,".vehicle-selector")}();
//# sourceMappingURL=vehicleselector.js.map